import sys
import time
import requests

class info():
    def __init__(self):
        pass

    def get_robots_txt(self, target):
        req = requests.get(target+"/robots.txt")
        r = req.text
        print(r)

    def get_dot_git(self, target):
        req = requests.get(target+"/.git/")
        r = req.status_code
        if r == 200:
            subprocess.call("wget -r"+target, shell=True)
        elif r == 403:
            print("Found .git, Forbidden")
        else:
            print("NO .git folder found")

    def get_dot_svn(self, target):
        req = requests.get(target+"/.svn/entries")
        r = req.status_code
        if r == 200:
            print(r)
        elif r == 403:
            print("Forbidden")
        else:
            print("NO .SVN folder found")

    def get_dot_htaccess(self, target):
        req = requests.get(target+"/.htaccess")
        r = req.text
        statcode = req.status_code
        if statcode == 403:
            print("403 Forbidden")
        else:
            print(r)

    def get_index(self, target):
        req = requests.get(target+"/index.php~")
        r = req.text
        statcode = req.status_code
        if statcode == 200:
            print("Found VIM swap file")
            print("===============================================")
            print(r)
            print("===============================================")
        else:
            print("Moving on from index.php")

    def get_indexphps(self, target):
        req = requests.get(target+"/index.phps")
        r = req.text
        statcode = req.status_code
        if statcode == 200:
            print("Found something interesting")
            print("===============================================")
            print(r)
            print("===============================================")
        else:
            print("Moving on from index.phps")

    def get_dotbak(self, target):
        common_file_names = ['index', 'old']
        for i in common_file_names:
            req = requests.get(target+"/"+i+".bak")
            r = req.text
            statcode = req.status_code
            if statcode == 200:
                print(r)
            # elif statcode == 200:
            #     req = requests.get(target+"/"+i+".BAK")
            #     r = req.txt
            #     statcode = req.status_code
            #     if statcode == 200:
            #         print(r)
            else:
                print(i + ".bak files not found")
    def get_dotold(self,target):
        req = requests.get(target+"/index.old")
        r = req.text
        statcode = req.status_code
        if statcode == 200:
            print(r)


if __name__=='__main__':
    obj=info()
    print("Checking for Robots.txt")
    print("=======================")
    time.sleep(1)
    obj.get_robots_txt(sys.argv[1])
    print("Checking for .git")
    print("=================")
    time.sleep(1)
    obj.get_dot_git(sys.argv[1])
    print("Checking for .htaccess")
    print("=================")
    time.sleep(1)
    obj.get_dot_htaccess(sys.argv[1])
    print("Checking for .svn")
    print("=================")
    time.sleep(1)
    obj.get_dot_svn(sys.argv[1])
    print("Checking for index file")
    print("=================")
    time.sleep(1)
    obj.get_index(sys.argv[1])
    print("Checking for VIM swap file")
    print("=================")
    time.sleep(1)
    obj.get_indexphps(sys.argv[1])
    print("Checking for .bak/.BAK")
    print("=================")
    time.sleep(1)
    obj.get_dotbak(sys.argv[1])
    print("Checking for .old/.OLD")
    print("=================")
    time.sleep(1)
    obj.get_dotold(sys.argv[1])
